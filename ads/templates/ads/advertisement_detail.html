{% extends 'ads/base.html' %}
{% block title %}{{ advertisement.title }}{% endblock %}

{% block content %}
    <div class="card">
        <div class="card-body">
            {% if advertisement.cover %}
                <img src="{{ advertisement.cover.url }}" class="card-img-top mb-3" alt="{{ advertisement.title }}" style="max-height: 300px; object-fit: cover;">
            {% endif %}

            <h2 class="card-title">{{ advertisement.title }}</h2>
            <p class="card-text">{{ advertisement.description }}</p>
            <p class="card-text">
                <strong>Цена:</strong> {{ advertisement.price }} руб.<br>
                <strong>Город:</strong> {{ advertisement.city }}<br>
                <strong>Категория:</strong> {{ advertisement.category }}<br>
                <strong>Автор:</strong>
                <a href="{% url 'profile' advertisement.author.username %}">
                    {{ advertisement.author.username }}
                </a><br>
                <strong>Создано:</strong> <time datetime="{{ advertisement.created_at|date:'c' }}">{{ advertisement.created_at|date:"d.m.Y H:i" }}</time><br>
                <strong>Обновлено:</strong> <time datetime="{{ advertisement.updated_at|date:'c' }}">{{ advertisement.updated_at|date:"d.m.Y H:i" }}</time>
            </p>

            <!-- Теги -->
            <div class="mt-3">
                <strong>Теги:</strong>
                {% for tag in advertisement.tags.all %}
                    <a href="{% url 'tag_ads' tag.slug %}" class="badge" style="background-color: {{ tag.color }}; color: white; text-decoration: none; margin-right: 5px;">
                        {{ tag.name }}
                    </a>
                {% empty %}
                    <span class="text-muted">Тегов нет</span>
                {% endfor %}
            </div>

            {% if user.is_authenticated and user != advertisement.author %}
                <a href="{% url 'create_response' advertisement.slug %}" class="btn btn-primary mt-3">
                    Оставить отклик
                </a>
            {% endif %}

            {% if user == advertisement.author %}
                <div class="mt-3">
                    <a href="{% url 'advertisement_update' advertisement.slug %}" class="btn btn-secondary">
                        Редактировать
                    </a>
                    <a href="{% url 'advertisement_delete' advertisement.slug %}" class="btn btn-danger">
                        Удалить
                    </a>
                </div>
            {% endif %}
        </div>
    </div>
{% endblock %}